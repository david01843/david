<!DOCTYPE html>
<html lang="en"><!--https://colorscheme.ru/html-colors.html-->
<head>
	<meta charset="UTF-8" name="google" content="notranslate">
	<style>
		* {margin: 0; fuser-select: none; font-family: "DejaVu Sans";}
		body {display: flex; flex-direction: column; justify-content: center; align-items: center;}
		#level {display: flex; width: calc(100vw - 4px); margin: 2px 2px 32px 2px;}
		a {
			display: flex; flex: 1 0 auto; justify-content: center;
			margin: 2px; border-radius: 4px; padding: 2px 0; font-size: 14px;
		}
		#keyrow1, #keyrow2, #keyrow3 {display: flex;}
		#keyrow2, #keyrow3 {margin-right: 16px;}
		p {
			display: inline-block; width: 32px; height: 32px; line-height: 32px;
			margin: 2px; text-align: center; font-size: 18px; border-radius: 4px;
		}
		h1 {font-size: 32px; height: 32px; font-weight: normal; margin-top: 16px;}
	</style>
</head>
<body>
	<div id="level"><a>фываолдж</a><a>енприт</a><a>кгмь</a><a>ушсб</a><a>цщчю</a><a>йзя.,</a><a>ёхэъ</a></div>
	<div id="keyrow1"><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p></div>
	<div id="keyrow2"><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p></div>
	<div id="keyrow3"><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p></div>
	<h1></h1>
	<h1 style="color: silver;">asdf</h1>
</body>
<script>
	const data = ["вал, ввод, вдова, во, вода, вы, вывод, выф, да, два, до, довод, жажда, жало, жыл, лад, ложа, лыж, лыф, овал, ож, фал, фоф, фы, фыва, фыж, фыф", "вал, ввод, вдова, во, вода, вы, вывод, выф, да, два, до, довод, жажда, жало, жыл, и, интер, лад, ложа, лыж, лыф, мир, не, нет, ни, овал, ож, пент, пер, пинет, пинта, пир, пирит, пре, при, принт, принтер, рен, ритм, тери, тернии, терпи, тип, тире, трен, три, фал, фоф, фы, фыва, фыж, фыф", "вал, ввод, вдова, во, вода, враг, вы, вывод, выф, где, гид, гнев, го, год, годы, гол, гора, город, гри, гром, да, дар, два, до, довод, дождь, дом, жажда, жало, жить, жыл, и, игра, интер, кит, корм, кот, кто, лад, ложа, ложь, лыж, лыф, маг, март, мир, мода, молоко, море, не, нет, ни, нитка, нога, овал, ож, пар, парк, пент, пер, петь, пинет, пинта, пир, пирит, пить, пот, пре, при, принт, принтер, рад, рак, рамка, рен, ритм, род, рожь, рот, тери, тернии, терпи, тигр, тик, тип, тире, том, трен, три, фал, фоф, фы, фыва, фыж, фыф", "бум, бус, бусы, буш, бушу, вал, ввод, вдова, во, вода, враг, вы, вывод, выф, где, гид, гнев, го, год, годы, гол, гора, город, гри, гром, да, дар, два, до, довод, дождь, дом, дуб, дума, душ, жажда, жало, жить, жыл, и, игра, интер, кит, корм, кот, кто, лад, ложа, ложь, лыж, лыф, маг, март, мир, мода, молоко, море, муж, мусор, не, нет, ни, нитка, нога, овал, ож, пар, парк, пент, пер, петь, пинет, пинта, пир, пирит, пить, пот, пре, при, принт, принтер, рад, рак, рамка, рен, ритм, род, рожь, рот, суд, сум, сумка, суп, сушка, тери, тернии, терпи, тигр, тик, тип, тире, том, трен, три, фал, фоф, фы, фыва, фыж, фыф, шуба, шум, шумно, шут", "борец, брюква, бум, бус, бусы, буш, бушу, бюджет, бюст, вал, ввод, вдова, во, вода, враг, вы, вывод, выф, где, гид, гнев, го, год, годы, гол, гора, город, гри, гром, да, дар, два, до, довод, дождь, дом, дуб, дума, душ, дюна, жажда, жало, жить, жыл, жюри, и, игра, интер, кит, конец, корм, кот, кричать, кто, лад, ложа, ложь, лыж, лыф, маг, март, мир, мода, молоко, молчать, море, муж, мусор, мычать, не, нет, ни, нитка, нога, ночь, овал, ож, пар, парк, певец, пент, пер, петь, печь, пинет, пинта, пир, пирит, пить, пот, пре, при, принт, принтер, птица, пюре, рад, рак, рамка, рен, речь, ритм, род, рожь, рот, рюмка, суд, сум, сумка, суп, сучок, сушка, сюжет, тери, тернии, терпи, тигр, тик, тип, тире, том, трен, три, тюк, улица, фал, фоф, фы, фыва, фыж, фыф, цал, царь, цвет, цена, цирк, цифра, цок, цуг, час, человек, четыре, чтиво, чуб, чудо, чум, чуть, чушка, чушь, шуба, шум, шумно, шут, щуп", "ай, борец, брюква, бум, бус, бусы, буш, бушу, бюджет, бюст, вал, ввод, вдова, во, вода, враг, вы, вывод, выф, газ, где, гид, гнев, го, год, годы, гол, гора, город, гри, гром, да, дар, два, до, довод, дождь, дом, дуб, дума, душ, дюна, ей, жажда, жало, жить, жыл, жюри, заяц, земля, зима, злой, зоя, зя, и, игра, интер, кит, конец, корм, кот, кричать, кто, лад, ложа, ложь, лыж, лыф, маг, май, март, мир, мода, мой, молоко, молчать, море, мороз, муж, мусор, мычать, не, нет, ни, нитка, новый, нога, ночь, овал, ож, ой, пар, парк, певец, пент, пер, петь, печь, пинет, пинта, пир, пирит, пить, пот, пояс, пре, при, принт, принтер, птица, пюре, рад, раз, рай, рак, рамка, рен, речь, ритм, род, рожь, рот, рюмка, свой, синий, союз, старый, суд, сум, сумка, суп, сучок, сушка, сюжет, таз, тазы, твой, тери, тернии, терпи, тигр, тик, тип, тире, том, трен, три, тюк, улица, фал, фоф, фы, фыва, фыж, фыф, цал, царь, цвет, цена, цирк, цифра, цок, цуг, чай, час, человек, черный, четыре, чтиво, чтя, чуб, чудо, чум, чуть, чушка, чушь, чья, шуба, шум, шумно, шут, щуп, я, яблоко, язва, язык, яй, яйцо, яма", "ай, ах, борец, брюква, бум, бус, бусы, буш, бушу, бюджет, бюст, вал, ввод, вдова, во, вода, враг, всё, въезд, вы, вывод, выезд, выф, газ, где, гид, гнев, го, год, годы, гол, гора, город, гри, гром, да, дар, два, до, довод, дождь, дом, дуб, дума, душ, дуэт, дюна, ей, ещё, жажда, жало, жить, жыл, жюри, заяц, земля, зима, злой, зоя, зя, и, игра, интер, инъекция, кафе, кит, конец, корм, кот, кофе, кричать, кто, лад, ложа, ложь, лыж, лыф, маг, май, март, мир, мода, мой, молоко, молчать, море, мороз, моё, муж, мусор, мычать, мэр, не, нет, ни, нитка, новый, нога, ночь, объект, объём, овал, один, ож, ой, ох, пар, парк, певец, пент, пер, петь, печь, пинет, пинта, пир, пирит, пить, плохо, подъём, пот, поэт, пояс, пре, при, принт, принтер, птица, пэр, пюре, рад, раз, разъём, рай, рак, рамка, рен, речь, ритм, род, рожь, рот, рюмка, свой, своё, синий, союз, старый, субъект, суд, сум, сумка, суп, сухо, сучок, сушка, съезд, съёмка, сэр, сюжет, таз, тазы, твой, твоё, тери, тернии, терпи, тигр, тик, тип, тире, тихо, том, трен, три, тюк, улица, ух, фал, фоф, фы, фыва, фыж, фыф, хлеб, холод, хор, хорошо, цал, царь, цвет, цена, цирк, цифра, цок, цуг, чай, час, человек, черный, четыре, чтиво, чтя, чуб, чудо, чум, чуть, чушка, чушь, чья, шуба, шум, шумно, шут, щуп, ъезд, эра, эти, это, эх, эхо, я, яблоко, язва, язык, яй, яйцо, яма, ёж, ёлка"]
	var d = []
	const a = document.querySelectorAll("a")
	const p = document.querySelectorAll("p")
	const h1 = document.querySelectorAll("h1")
	var active = ""
	var hint = true
	
	var x = ""
	a.forEach((i, j) => {
		let y = x+i.innerHTML.replace(',', '')
		z = 200*(1-j/(a.length-1))
		i.style.backgroundColor = `hsl(${z}, 100%, 80%)`
		i.addEventListener("click", () => {
			d = data[j].split(", ")
			colorkeys(y)
			labelkeys()
			showkeys()
			next()
		})
		x = y
	})
	kchar = "йцукенгшщзхъфывапролджэячсмитьбю.ё"
	p.forEach((i, j) => {i = kchar[j]})
	kcode = [81, 87, 69, 82, 84, 89, 85, 73, 79, 80, 219, 221,
		65, 83, 68, 70, 71, 72, 74, 75, 76, 186, 222,
		90, 88, 67, 86, 66, 78, 77, 188, 190, 191, 192] // ё = 192
	function colorkeys(x) {
		active = x
		p.forEach((i, j) => {i.style.backgroundColor = active.includes(kchar[j]) ? "thistle" : "#eee"})
		for (i of [12, 13, 14, 15, 18, 19, 20, 21]) {p[i].style.backgroundColor = "lightsteelblue"}
	} colorkeys("фываолдж")
	function labelkeys() {
		p.forEach((i, j) => {i.innerHTML = (i.style.backgroundColor == "rgb(238, 238, 238)") ? "" : kchar[j]})
	} labelkeys()
	function showkeys() {p.forEach((i) => {i.style.color = "black"; hint = true})}
	function hidekeys() {p.forEach((i) => {i.style.color = i.style.backgroundColor; hint = false})}
	function next() {
		d.sort(() => Math.random()-.5)
		h1[0].innerHTML = ""
		h1[1].innerHTML = ""
		x = 0
		while (h1[1].innerHTML.length < 32) {
			h1[1].innerHTML += d[x]
			if (active.includes(".")) {
				if (Math.random() < .2) {h1[1].innerHTML += "."}
				else if (Math.random() < .4) {h1[1].innerHTML += ","}
			}
			h1[1].innerHTML += " "
			x++
		}
	}
	
	document.addEventListener("keydown", (e) => {
		i = kcode.indexOf(e.keyCode)
		if (i != -1) {h1[0].innerHTML += (i == 32 && e.shiftKey) ? "," : kchar[i]}
		else if (e.keyCode == 8) {h1[0].innerHTML = h1[0].innerHTML.slice(0, -1)} // backspace
		else if (e.keyCode == 13) { // enter
			h10 = h1[0].innerHTML.trim()
			h11 = h1[1].innerHTML.trim()
			let j
			for (j = 0; j < Math.min(h10.length, h11.length); j++) {
				if (h10[j] != h11[j]) {break}
			}
			if (h10 == h11) {next()}
			else if (j < h10.length) {h1[0].innerHTML = h10.slice(0, j)}
			else if (h11[j] == " ") {p[kchar.indexOf(h11[j+1])].style.color = "black"}
			else if (h11[j] == ",") {p[32].style.color = "black"}
			else {p[kchar.indexOf(h11[j])].style.color = "black"}
		}
		else if (e.keyCode == 32) {h1[0].innerHTML += " "} // space
	})
	document.querySelector("#keyrow1").addEventListener("click", () => hint ? hidekeys() : showkeys())
	document.querySelector("#keyrow2").addEventListener("click", () => hint ? hidekeys() : showkeys())
	document.querySelector("#keyrow3").addEventListener("click", () => hint ? hidekeys() : showkeys())
</script>
</html>
